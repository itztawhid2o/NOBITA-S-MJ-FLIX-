<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MJ-FLIX live tv</title>
    <style>
        body {
            background-color: #161616;
            color: #fff;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            position: relative;
        }
        .background-video {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
            opacity: 0.5;
        }
        .header {
            background-color: rgba(28, 28, 28, 0.8);
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
        }
        .menu-icon {
            position: absolute;
            left: 10px;
            background-color: #ff0000;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 40px;
            left: 10px;
            background-color: #2c2c2c;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            border-radius: 8px;
            width: 200px;
            z-index: 3;
        }
        .dropdown-menu button {
            width: 100%;
            padding: 10px;
            background-color: #ff0000;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px 0;
        }
        .video-player {
            width: 100%;
            max-width: 470px;
            height: 380px;
            background-color: #000;
            margin: 30px auto;
            z-index: 1;
            position: relative;
            border: 5px solid #ff0000;
            border-radius: 15px;
            padding: 5px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }
        .footer {
            background-color: rgba(28, 28, 28, 0.8);
            padding: 10px;
            text-align: center;
            color: #fff;
            font-size: 14px;
            position: relative;
            z-index: 1;
        }
        .search-box {
            width: 80%;
            margin: 20px auto;
            padding: 10px;
            font-size: 16px;
            background-color: #222;
            color: #fff;
            display: block;
            border: none;
            border-radius: 5px;
        }
        .channel-section {
            margin: 20px;
            z-index: 1;
            position: relative;
        }
        .channel-category {
            margin-bottom: 20px;
            padding: 10px;
            background-color: rgba(44, 44, 44, 0.8);
            border-radius: 8px;
        }
        .channel-category h2 {
            margin: 0 0 10px 0;
            border-left: 4px solid #ff0000;
            padding-left: 10px;
        }
        .channel-list {
            display: flex;
            gap: 10px;
            overflow-x: auto; /* Horizontal scrolling */
            padding-bottom: 10px;
            padding-top: 10px;
            scrollbar-width: thin;
            scrollbar-color: #ff0000 #161616; /* Customize scrollbar */
        }
        .channel {
            background-color: #333;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            width: 120px;
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
            min-width: 120px;  /* Ensure consistent size */
        }
        .channel img {
            width: 60px;
            height: 60px;
            margin-bottom: 5px;
            border-radius: 5px;
        }
        .footer-text {
            font-size: 16px;
            color: #ff0000;
            font-weight: bold;
        }
        .loading-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            color: #fff;
            z-index: 2;
        }
    </style>
</head>
<body>
    <video autoplay muted loop class="background-video">
        <source src="https://i.gifer.com/445q.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <div class="header">
        <div class="menu-icon" onclick="toggleDropdown()">‚ò∞</div>
        <h1> ùó†ùóù ùêãùê¢ùêØùêû·µó·µõ</h1>
    </div>

    <div class="dropdown-menu" id="dropdown-menu">
        <button onclick="window.open('https://wa.me/qr/PRGY5QFNEXEJJ1', '_blank')">WhatsApp</button>
        <button onclick="window.open('https://manikganjflix.blogspot.com', '_blank')">Website</button>

<button onclick="window.open('https://apk.e-droid.net/apk/app3182293-zia19o.apk?v=12', '_blank')">Movie App</button>

    </div>

    <video id="video-player" class="video-player" controls>
        <source id="video-source" src="" type="application/x-mpegURL">
        Your browser does not support the video tag.
    </video>
<marquee direction="left"> <h3> ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶§‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶≤‡¶æ‡¶ó‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá, ‡¶ß‡ßà‡¶∞‡ßç‡¶Ø ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®ü§óü´∞üèª</h3> </marquee>

    <div class="search-box-wrapper">
        <input type="text" id="search-box" class="search-box" placeholder="Search for channels..." oninput="filterChannels()">
    </div>

    <div class="channel-section" id="channel-section">
        <!-- Channels will be loaded here -->
    </div>

    <div class="footer">
        <div class="footer-text">Developed by ÍßÅ‡º∫üÖ®Ô∏éüÖêÔ∏éüÖùÔ∏éüÖñÔ∏éüÖßÔ∏éüÖòÔ∏éüÖêÔ∏éüÖùÔ∏éüÖñÔ∏é‡ºªÍßÇ</div>
    </div>

    <script>
        let allChannels = [];  // Store all channels globally

        async function fetchPlaylist(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.text();
                console.log('Playlist data loaded successfully:', data);
                const channels = parseM3U(data);
                allChannels = channels;  // Save channels globally
                renderChannels(channels);
            } catch (error) {
                console.error('Error fetching playlist:', error);
            }
        }

        function parseM3U(data) {
            const lines = data.split('\n');
            const channels = [];
            let currentChannel = {};
            let currentCategory = 'Uncategorized';

            lines.forEach(line => {
                if (line.startsWith('#EXTINF')) {
                    const nameMatch = line.match(/,(.+)$/);
                    if (nameMatch) {
                        currentChannel.name = nameMatch[1];
                    }
                    const categoryMatch = line.match(/group-title="([^"]+)"/);
                    if (categoryMatch) {
                        currentCategory = categoryMatch[1];
                    }
                    const logoMatch = line.match(/tvg-logo="([^"]+)"/);
                    if (logoMatch) {
                        currentChannel.logo = logoMatch[1];
                    }
                } else if (line && !line.startsWith('#')) {
                    currentChannel.url = line;
                    currentChannel.category = currentCategory;
                    channels.push(currentChannel);
                    currentChannel = {};
                }
            });

            console.log('Parsed channels:', channels);
            return channels;
        }

        function renderChannels(channels) {
            const channelSection = document.getElementById('channel-section');
            channelSection.innerHTML = '';

            const grouped = groupByCategory(channels);

            for (const category in grouped) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'channel-category';
                categoryDiv.innerHTML = `<h2>${category}</h2>`;

                const channelList = document.createElement('div');
                channelList.className = 'channel-list';

                grouped[category].forEach(channel => {
                    const channelDiv = document.createElement('div');
                    channelDiv.className = 'channel';
                    channelDiv.innerHTML = `
                        <img src="${channel.logo || 'default-logo.png'}" alt="${channel.name} Logo">
                        <div>${channel.name}</div>
                    `;
                    channelDiv.onclick = () => {
                        playChannel(channel.url);
                        scrollToPlayer();
                    };
                    channelList.appendChild(channelDiv);
                });

                categoryDiv.appendChild(channelList);
                channelSection.appendChild(categoryDiv);
            }
        }

        function groupByCategory(channels) {
            const categories = {};
            channels.forEach(channel => {
                const category = channel.category || 'Uncategorized';
                if (!categories[category]) {
                    categories[category] = [];
                }
                categories[category].push(channel);
            });
            return categories;
        }

        function playChannel(url) {
            const videoSource = document.getElementById('video-source');
            const videoPlayer = document.getElementById('video-player');
            const loadingMessage = document.createElement('div');
            loadingMessage.classList.add('loading-message');
            loadingMessage.textContent = "Please wait, loading... (5 seconds)";
            videoPlayer.appendChild(loadingMessage);

            // Ensure the video source URL is properly set
            videoSource.src = url;

            // Reload the player and start playing the video
            videoPlayer.load();
            videoPlayer.play();

            // Handle timeout if the video is not working after 5 seconds
            let timer = setTimeout(() => {
                if (videoPlayer.readyState < 3) {
                    loadingMessage.textContent = "Not working, try another.";
                }
            }, 5000); // 5 seconds timeout

            // Remove loading message once the video is loaded
            videoPlayer.onloadeddata = () => {
                clearTimeout(timer);
                loadingMessage.style.display = 'none';
            };
        }

        function scrollToPlayer() {
            const videoPlayer = document.getElementById('video-player');
            videoPlayer.scrollIntoView({ behavior: 'smooth' });
        }

        function toggleDropdown() {
            const dropdownMenu = document.getElementById('dropdown-menu');
            dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
        }

        function filterChannels() {
            const searchTerm = document.getElementById('search-box').value.toLowerCase();
            const filteredChannels = allChannels.filter(channel => 
                channel.name.toLowerCase().includes(searchTerm)
            );
            renderChannels(filteredChannels);
        }

        // Fetch playlist on page load
        fetchPlaylist('https://raw.githubusercontent.com/FunctionError/PiratesTv/main/combined_playlist.m3u')
</script>
</body>
</html>
