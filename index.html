<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTV Channel List</title>
    <style>
        body {
            background-color: #161616;
            color: #fff;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            position: relative;
        }
        .background-video {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
            opacity: 0.5;
        }
        .header {
            background-color: rgba(28, 28, 28, 0.8);
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
        }
        .clock {
            position: absolute;
            right: 10px;
            background-color: #ff0000;
            border-radius: 20px;
            padding: 5px 10px;
            font-size: 14px;
        }
        .menu-icon {
            position: absolute;
            left: 10px;
            background-color: #ff0000;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 40px;
            left: 10px;
            background-color: #2c2c2c;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            border-radius: 8px;
            width: 200px;
            z-index: 3;
        }
        .dropdown-menu button {
            width: 100%;
            padding: 10px;
            background-color: #ff0000;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px 0;
        }
        .channel-section {
            margin: 20px;
            z-index: 1;
            position: relative;
        }
        .channel-category {
            margin-bottom: 20px;
            padding: 10px;
            background-color: rgba(44, 44, 44, 0.8);
            border-radius: 8px;
        }
        .channel-category h2 {
            margin: 0 0 10px 0;
            border-left: 4px solid #ff0000;
            padding-left: 10px;
        }
        .channel-list {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        .channel {
            background-color: #333;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            width: 120px;
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
        }
        .channel img {
            width: 60px;
            height: 60px;
            margin-bottom: 5px;
            border-radius: 5px;
        }
        .video-player {
            width: 100%;
            max-width: 800px;
            height: 250px;
            background-color: #000;
            margin: 20px auto;
            z-index: 1;
            position: relative;
        }
        .footer {
            background-color: rgba(28, 28, 28, 0.8);
            padding: 10px;
            text-align: center;
            color: #fff;
            font-size: 14px;
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <video autoplay muted loop class="background-video">
        <source src="https://www.pexels.com/video/10452098/download/" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <div class="header">
        <div class="menu-icon" onclick="toggleDropdown()">â˜°</div>
        <h1>BDIX IPTV HUB</h1>
        <div class="clock" id="clock">00:00:00</div>
    </div>

    <div class="dropdown-menu" id="dropdown-menu">
        <button onclick="window.open('https://wa.me/your-whatsapp-number', '_blank')">WhatsApp</button>
        <button onclick="window.open('https://t.me/your-telegram-link', '_blank')">Telegram</button>
        <!-- Add more buttons for other links -->
    </div>

    <video id="video-player" class="video-player" controls>
        <source id="video-source" src="" type="application/x-mpegURL">
        Your browser does not support the video tag.
    </video>

    <div class="channel-section" id="channel-section">
        <!-- Channels will be loaded here -->
    </div>

    <div class="footer">
        Developed by Your Name. Contact: your.email@example.com
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        async function fetchPlaylist(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.text();
                console.log('Playlist data loaded successfully:', data);
                const channels = parseM3U(data);
                renderChannels(channels);
            } catch (error) {
                console.error('Error fetching playlist:', error);
            }
        }

        function parseM3U(data) {
            const lines = data.split('\n');
            const channels = [];
            let currentChannel = {};
            let currentCategory = 'Uncategorized';

            lines.forEach(line => {
                if (line.startsWith('#EXTINF')) {
                    const nameMatch = line.match(/,(.+)$/);
                    if (nameMatch) {
                        currentChannel.name = nameMatch[1];
                    }
                    const categoryMatch = line.match(/group-title="([^"]+)"/);
                    if (categoryMatch) {
                        currentCategory = categoryMatch[1];
                    }
                    const logoMatch = line.match(/tvg-logo="([^"]+)"/);
                    if (logoMatch) {
                        currentChannel.logo = logoMatch[1];
                    }
                } else if (line && !line.startsWith('#')) {
                    currentChannel.url = line;
                    currentChannel.category = currentCategory;
                    channels.push(currentChannel);
                    currentChannel = {};
                }
            });

            console.log('Parsed channels:', channels);
            return channels;
        }

        function renderChannels(channels) {
            const channelSection = document.getElementById('channel-section');
            channelSection.innerHTML = '';

            const grouped = groupByCategory(channels);

            for (const category in grouped) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'channel-category';
                categoryDiv.innerHTML = `<h2>${category}</h2>`;

                const channelList = document.createElement('div');
                channelList.className = 'channel-list';

                grouped[category].forEach(channel => {
                    const channelDiv = document.createElement('div');
                    channelDiv.className = 'channel';
                    channelDiv.innerHTML = `
                        <img src="${channel.logo || 'default-logo.png'}" alt="${channel.name} Logo">
                        <div>${channel.name}</div>
                    `;
                    channelDiv.onclick = () => {
                        playChannel(channel.url);
                        scrollToPlayer();
                    };
                    channelList.appendChild(channelDiv);
                });

                categoryDiv.appendChild(channelList);
                channelSection.appendChild(categoryDiv);
            }
        }

        function groupByCategory(channels) {
            const categories = {};
            channels.forEach(channel => {
                const category = channel.category || 'Uncategorized';
                if (!categories[category]) {
                    categories[category] = [];
                }
                categories[category].push(channel);
            });
            return categories;
        }

        function playChannel(url) {
            const videoPlayer = document.getElementById('video-player');
            const videoSource = document.getElementById('video-source');

            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoPlayer);
                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                    videoPlayer.play();
                });
            } else if (videoPlayer.canPlayType('application/vnd.apple.mpegurl')) {
                videoSource.src = url;
                videoPlayer.load();
                videoPlayer.play();
            }
        }

        function scrollToPlayer() {
            const videoPlayer = document.getElementById('video-player');
            videoPlayer.scrollIntoView({ behavior: 'smooth' });
        }

        function toggleDropdown() {
            const dropdownMenu = document.getElementById('dropdown-menu');
            dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
        }

        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const currentTime = `${hours}:${minutes}:${seconds}`;
            document.getElementById('clock').textContent = currentTime;
        }

        setInterval(updateClock, 1000); // Update clock every second

        // Fetch playlist on page load
        fetchPlaylist('https://raw.githubusercontent.com/shahinkhan1003/TV/refs/heads/main/tv.m3u');
    </script>
</body>
</html>
